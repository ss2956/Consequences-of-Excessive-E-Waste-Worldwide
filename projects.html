<!DOCTYPE html>

<html>
<link rel="stylesheet" href="indexStyle.css">
<link rel="stylesheet" href="projects.css">
<link href='https://fonts.googleapis.com/css?family=Alegreya Sans' rel='stylesheet'>

<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

<script src="https://www.amcharts.com/lib/3/ammap.js?n"></script>
<script src="https://www.amcharts.com/lib/3/maps/js/worldLow.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style>
#chartdiv {
  width:60%;
  height:500px;
  font-size: 11px;
}


body{
  background-color: black;
}
svg{
  border:solid 1px black ;

}
#info_box{
  border:solid 1px black;
  width:400px;
  height:300px;
  margin:10px;
  display:flex;
  flex-direction: column;
  /* justify-content: space-around; */

  align-items: center;
}
.circle{
  stroke-width:5px;
  stroke: transparent;
  fill:black;
}
button{
  text-align: center;
  width:55px;
  height:25px;
  border: solid .5px black;
  margin-top:5px;
}
body
{
  margin:0px;
 font-family: 'Armata';
overflow-x: hidden

}
.country_name{
  font-size: 15px;
}
.horo_flex{
  display:flex;
  flex-direction: row;
  justify-content:space-around;
}
.vert_flex{
  display:flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.text_blurb{
  font-size: 30px;
  font-weight:normal;
  height:300px;
  text-align: center;

}

</style>
<body onload="">

  <div  class = "" id = "heading"  >
      <nav id = "leftHeading" class = "fader show-on-scroll"  >
        <ul>
          <li style="padding-left:20px; font-style:bold; " >

        </li>

        </ul>
        </nav>

    <nav  id = "rightHeading" class = "fader show-on-scroll">
      <ul>

      </ul>
      </nav>

  </div>
  <div id="mySidebar" class="sidebar">
    <a class = "navOption" href = "index.html" >
      Home
    </a>
    <a class = "navOption" onclick = "goTo('#bioBackground');">
    Projects
  </a>
  <a class = "navOption" target = "_blank" href="https://docs.google.com/document/d/11vbQMzlBMxW8gMmQSulHnV9UBVi2laujfQ-TzYJiTjk/edit?usp=sharing">
    Resume
  </a>
  <a class = "navOption" target = "_blank" href = "https://mail.google.com/mail/u/0/#inbox?compose=VpCqJKjWJKcmMxRVZDxbCRGVgdpqKhgcwpFMtgNGLNwBQWfWBvpwZwknZnWTwCHRvmnQqGq">
    ss2956@cornell.edu
  </a>
  </div>

  <div  class = "titleBox" >

<div class = "title fader show-on-scroll" id = "idTitle"  style ="position: fixed;
top: 25vh;
left: 0;
right: 0;z-index:0;">Consequences of  <br> Excessive E-Waste Worldwide</div>

<div style = "text-align:center; position: fixed;
top: 75vh;
left: 0;
right: 0;z-index:0;"><img class = "arrow"  width="100" height="75" src= "images/arrow.gif" onclick = "goTo('#bioBackground');"/></div>
</div>
<div class = "divider" >
  <p >Walkthrough</p>
</div>

<div id = "bioBackground">


<div id = "bioBackgroundTwo" style = "height:755vh">

 <div  class = " vert_flex text_blurb fader show-on-scroll" style = "padding-top:700px;">
   <div>This project provides a visual representation of how excessive e-waste affects people of the world
   </div>

</div>


<div  class = " vert_flex text_blurb fader show-on-scroll" style = "padding-top:700px;">
  <div>Many of us are impactors. We Buy. We Use. And We Throw Way.
  </div>
  <div class = "horo_flex">
  <img height = "250px" style = " margin:100px 40px;"src = "images/intro1.png"/>
  <img height = "250px" style = " margin:100px 40px;;" src = "images/intro2.png"/>
  <img height = "250px" style = " margin:100px 40px;;"src = "images/intro3.png"/>
</div>
</div>

<div  class = " vert_flex text_blurb fader show-on-scroll" style = "padding-top:700px;">
  <div>But our actions impact the rest of the world. Our Health. And Our Future. </br> </br> </br> <strong>Consider The Impacted</strong>
  </div>
  <div class = "horo_flex">
  <img height = "250px" style = " margin:100px 40px;"src = "images/THA.png"/>
  <img height = "250px" style = " margin:100px 40px;;" src = "images/VNM.png"/>
  <img height = "250px" style = " margin:100px 40px;;"src = "images/IND.png"/>
</div>
</div>

<div  class = " vert_flex text_blurb fader show-on-scroll" style = "padding-top:700px;">
  <div>Most E waste is dumped in landfills but some are recycled. Worker of recycling facilities are in dangerous conditions. </br> </br></br> <strong> Using your electronics for longer can make a difference</strong>
  </div>
</div>

<div fader show-on-scroll>
<div  class = " vert_flex text_blurb fader show-on-scroll" style = "padding-top:700px;">
  <div>In this project, explore how the E waste recycling industry is harmful to the world. New laws are often ignored by corrupted leadership, but our actions can make a change.</br> </br></br> <strong > See how keeping your phone for just 1 extra year can make a big difference </strong>
  </div>
</div>




<div style = "text-align:center; margin:20px; padding-top:300px; font-size:20px;">
  What if __ Countries Kept their Phones for __ Years? </br>  </br> select year first
  <div class = "horo_flex" style = " justify-content:center; margin:0px; align-items: flex-end;">
  <div>
  Years
  <div id = "year_buttons" style = "margin:0px 60px"></div>
  </div>

<div>
Countries
<div id = "country_buttons" style = "margin:0px 60px"></div>
</div>

</div>
</div>

<div style = "text-align:center; margin:10px; font-style:bold; font-size:20px;">Total Waste Saved = <span id = "waste_count"> </span> </div>
<div class = "horo_flex" style = "margin-bottom:100px; margin-top:0px;">

<svg id="my_dataviz" width="650" height="400">
  </svg>
<div class = vert_flex>
<div id = "info_box" >
<div class = "info" id = "country_name" style = " height:15%; margin-top:10px; font-size:40px; font-weight:bold;">
  country name
</div>
<div class = "info" id = "country_tons" style = "height:8%; margin-bottom:10px; font-size: 11px; font-weight:bold;">
  tons exported/imported
</div>
<div class = "info" id = "country_info" style = " text-align: center;height:50%; font-size:18px;">
  info about country
</div>


  <img  style = "margin:10px; height:120px;  "   id ="info_image" src = "" />

</div>
</div>
</div>

</div>


</div>
<script>

function goTo(elementId)
{
  $('html, body').animate({
  scrollTop: $(elementId).position().top +($(window).height()*(1/8))
}, 1600);


}
</script>



  <script src="show-on-scroll.js"></script>

</body>




<script>
countries_dict = {
"CHN":"China",
"IND":"India",
"USA":"United States",
"NGA": "Nigeria",
"JPN":"Japan",
"FRA": "France",
"RUS":"Russia",
"GBR": "United Kingdom",
"BRA":"Brazil",
"GHA":"Ghana",
"RWA":"Rwanda",
"THA":"Thailand",
"PAK":"Pakistan",
"MYS": "Malaysia",
"VNM":"Vietnam"
}
description_dict = {
"CHN":["China is the world's largest importer and producer of electronic waste with over 70% of all global e-waste imported there. China has recently banned E-waste imports, though thousands of lbs of electronics still enter the country every year.","CHN.png"],
"IND":["The Ewaste industry is exploiting familes across the world. In India, An estimated 50,000 men's, women's, and children's livelihoods depend on e-waste. With low wages, families face the reality: 'If one of us stops working for a day we won’t be able to make ends meet.' ","IND.png"],
"USA":[" In 1979, IBM Endicott reported a spill of 4,100 gallons of the solvent, a toxic compound from E Waste, into the public waters. The chemicals migrated from groundwater through the soil into nearby buildings above, contaminating air and water of the citizens Decades later a school was built over the still contaminated area","USA.png"],
"NGA": ["Nigeria is the leading importer of E waste on the African continent. E waste recycling is a common job for Nigerians, however, people's jobs should not be a health hazard.  E Waste recycling releases pollutants and mercury, known to cause DNA damage, cancer, and cardiovascular disease","NGA.png"],
"JPN":["Japan ranks as the third most wasteful country in the world by volume, behind the United States and China. In 2013, the Japanese government reported that roughly 550 thousand tonnes of E waste was collected and treated in Japan, which only equates to about 24-30% of total e-waste. The rest are exported or dumped in landfills","JPN.png"],
"FRA": ["Of the estimated 4.5 million tonnes of plastic waste generated in 2016 in France, 80,000 tonnes ended up polluting the natural environment, and 10,000 tonnes entered the Mediterranean sea.France adopted its comprehensive Anti-waste Law in 2020 emphasizing reusing instead of recycling","FRA.png"],
"RUS":["Plastic takes 200-300 years to completely breakdown. It spoils the soil, harms small animals, and enters through groundwater into the nearest water sources.","RUS.png"],
"GBR": ["40 percent of E waste collected in the UK  is illegally exported overseas, while around 155,000 tonnes of E waste is sent to domestic landfill or incineration sites, which leaks toxics to the air and water near the facilities","GBR.png"],
"BRA":["In Brazil, the amount of electronic waste generated per capita increased in the last 20 years by 44% since 2016. The dumping and illegal importation of E waste continues to reveal that public policy is unable to deal with the problem, especially in poorer regions.","BRA.png"],
"GHA":["In Ghana's biggest dumping, Agbogbloshie, more than 5,000 informal scrap workers extract metals from burning the scraps every day enduring burns, back problems, and infected wounds throughout their workday","GHA.png"],
"RWA":["Rwanda is one of only 13 countries in Africa that have passed national legislation regarding E waste regulation. And it has led to the first official recycling and refurbishing facility in the country. Already repaired and refurbished more than 5,000 computers, which were sold to public schools. To date, it has processed more than 4,000 tons of e-waste and created more than 600 jobs.","RWA.png"],
"THA":["Thailand like China has banned E Waste imports, but thousands of electronics are still smuggled into the country. Everyday, women pick through the discarded innards of the modern world: batteries, circuit boards and bundles of wires, breaking down the E waste with hammers and raw hands","THA.png"],
"PAK":["Pakistan has emerged as a cheap E waste exporting site. Pakistan has banned the import of E waste but somehow items are still being imported to Pakistan under the name of “second-hand items”.","PAK.png"],
"MYS":[ "Malaysia has received millions of kilograms from US, Japan,  UK, Australia. As Malaysia transitions from a middle-high to a high-income country, E waste is only expected to increase, making it harder for them to properly dispose of their own countries' Ewaste and those of the rest of the world. Sometimes the waste is sent back, sometimes it ends up in landfills","MYS.png"],
"VNM":["Since its neighbor China banned E Waste imports, Vietnam has gotten even more imports into their country, often smuggled and accepted by corrupt officials","VNM.png"]
}
impactor= {
  "CHN":[850836,"VNM","IND","NGA","VNM"],
  "USA":[588030,"NGA","IND","GHA","PAK","MYS","RWA","THA"],
  "JPN":[226072,"GHA","MYS","NGA","THA","VNM"],
  "GBR":[68714,"NGA","GHA","IND","THA","PAK"],
  // 2143000 and 45% recycled
  "BRA":[96435,"NGA","GHA"],
  "FRA":[59928,"NGA","GHA","RWA","IND"],
  // 1533140 ton and 7% recycled
  "RUS":[107319,"GHA","PAK"]
}
coordinates = {
  "NGA": [320,295],
  "VNM": [555,288],
  "USA": [65,220],
  "BRA": [180,350],
  "RUS": [530,130],
  "CHN": [535,230],
  "IND": [485,265],
  "THA": [540,282],
  "MYS": [570,310],
  "PAK": [465,245],
  "JPN": [630,225],
  "RWA": [376,323],
  "FRA": [305,195],
  "GBR": [295,170],
  "GHA": [298,300]
}

// "Annually, computer devices account for nearly 70% of e-waste, 12% comes from the telecom sector, 8% from medical equipment and 7% from electric equipment."


// country code: lbs recycled from imports, percentage of recycled waste thats from imports, hover blurb
var impacted = {
  "RWA":[1500,"USA","FRA"],
  "NGA":[9000,"CHN","USA","GBR","JPN","BRA","FRA"],
  "THA":[3180,"JPN","USA","GBR"],
  "GHA":[2250,"USA","JPN","RUS","FRA","BRA","GBR"],
  "IND":[160000,"CHN","USA","GBR"],
  "PAK":[9541,"USA","GBR","RUS"],
  "MYS":[4717,"USA","JPN"],
  "VNM":[40360,"CHN","JPN"]
}
var impacted_ori = {
  "RWA":[1500,"USA","FRA"],
  "NGA":[9000,"CHN","USA","GBR","JPN","BRA","FRA"],
  "THA":[3180,"JPN","USA","GBR"],
  "GHA":[2250,"USA","JPN","RUS","FRA","BRA","GBR"],
  "IND":[160000,"CHN","USA","GBR"],
  "PAK":[9541,"USA","GBR","RUS"],
  "MYS":[4717,"USA","JPN"],
  "VNM":[40360,"CHN","JPN"]
}

impacted_lbs = []
Object.keys(impacted).forEach((item, i) => {
  impacted_lbs.push(impacted[item][0])
});
let sum_waste = 0

document.getElementById("waste_count").innerHTML = sum_waste;
impacted_keys =   Object.keys(impacted)
const colorScale = d3
  .scaleQuantile()
  .domain(impacted_lbs)
  .range(['#33cc33', '#ffff00', '#ff6600', '#e62e00']);



function get_color(id){
  if(Object.keys(impacted).includes(id)){
    // d3.select(this).append()(document.createElement('circle'))
                  // .attr("r", 10)
                  // .attr("fill", 'red')
                  // .attr("strokeStyle", 'black');
    return colorScale(impacted[id][0]);
  }
  else if(Object.keys(impactor).includes(id)){
    return "#663300";
  }
  else{
    return "#d8b48d";
  }


}
// The svg
var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

// Map and projection
var projection = d3.geoMercator()
 .scale(850/Math.PI/2)  // 960 pixels over 2 π radians
 .translate([300, 320])  // the center of the SVG/canvas



d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson", function(data){
  phoneWaste = {
    // phone ~ 200 grams
    // 20% phones are recycled
     // in tons
     // 100,000,000 phones a year,
    "USA":4409,
    // 70000000 phones/year
    "CHN":3086,
    // 5.3mil phones/Year
    "JPN":234.73,
    // 5mil phones.year
    "GBR":220.12,

  }
toggle_dict = {
  "USA":0,
  "JPN":1,
  "CHN":2,
  "GBR":3
}
let toggles = [false,false,false,false];
years = 0

function lowerWaste(name){
    effect = (phoneWaste[name]*years)/(parseInt((impactor[name].length-1)/2));
    console.log(effect)
    console.log(impactor[name].length)
    if(toggles[toggle_dict[name]]){
      for(x = 1; x < impactor[name].length; x++)
      {
        impacted[impactor[name][x]][0]  = impacted[impactor[name][x]][0] + effect;
        impacted[impactor[name][x]][0] = impacted[impactor[name][x]][0] > impacted_ori[impactor[name][x]][0]  ?  impacted_ori[impactor[name][x]][0] : impacted[impactor[name][x]][0];

        console.log(impactor[name][x])
        console.log("effect")
        console.log(effect)

        console.log("sum_waste")

        console.log(sum_waste)

      }
      sum_waste = sum_waste - (phoneWaste[name]*years)/(parseInt((impactor[name].length-1)/2))*(impactor[name].length-1)
      sum_waste = sum_waste < 0  ?  0 : sum_waste;

    }
    else{
      for(x = 1; x < impactor[name].length; x++)
      {

          impacted[impactor[name][x]][0]  = impacted[impactor[name][x]][0] - effect;
          impacted[impactor[name][x]][0] = sum_waste < 0  ?  0 : impacted[impactor[name][x]][0];

        console.log("effect")
        console.log(effect)

        console.log("sum_waste")

        console.log(sum_waste)
      }
      sum_waste = sum_waste + (phoneWaste[name]*years)/(parseInt((impactor[name].length-1)/2))*(impactor[name].length-1)


    }
    map.attr("fill",(d) => get_color(d.id));

    document.getElementById("waste_count").innerHTML = parseInt(sum_waste);
    }
  // console.log(lowerWaste("USA"))
  const U = document.createElement("button");
  U.onclick =  function(){
    lowerWaste('USA');
    console.log("toggle")
    console.log(toggles[toggle_dict["USA"]])
    if(years != 0) {if(toggles[toggle_dict["USA"]]){
      U.style.backgroundColor = "white";
      toggles[toggle_dict["USA"]] = false;
  }
  else{
    U.style.backgroundColor = "#d8b48d";
    console.log("here")
    toggles[toggle_dict["USA"]] = true;

  }
  }

  console.log(impacted);

}
  U.className = "buttons";
  U.innerText = "USA";
  const C = document.createElement("button");
  C.onclick =  function(){
    lowerWaste('CHN');
    if(years != 0) {
    if(toggles[toggle_dict["CHN"]]){
        C.style.backgroundColor = "white";
        toggles[toggle_dict["CHN"]] = false;

    }
    else{

      C.style.backgroundColor = "#d8b48d";
      toggles[toggle_dict["CHN"]] = true;

    }
  }
  console.log(impacted);

}
  C.innerText = "China";
  C.className = "buttons";
  const J = document.createElement("button");
  J.onclick =  function(){
    lowerWaste('JPN');
    if(years != 0) {

      if(toggles[toggle_dict["JPN"]]){
          J.style.backgroundColor = "white";
          toggles[toggle_dict["JPN"]] = false;

      }
      else{
        J.style.backgroundColor = "#d8b48d";
        toggles[toggle_dict["JPN"]] = true;

      }
    }
    console.log(impacted);

  }
  J.innerText = "Japan";
  J.className = "buttons";
  const G = document.createElement("button");
  G.onclick =  function(){
    lowerWaste('GBR');
    if(years != 0) {
      if(toggles[toggle_dict["GBR"]]){
          G.style.backgroundColor = "white";
          toggles[toggle_dict["GBR"]] = false;

      }
      else{
        G.style.backgroundColor = "#d8b48d";
        toggles[toggle_dict["GBR"]] = true;

      }
    }
    console.log(impacted);

  }
  G.innerText = "Britain";
  G.className = "buttons";
  document.getElementById("country_buttons").appendChild(U);
  document.getElementById("country_buttons").appendChild(G);
  document.getElementById("country_buttons").appendChild(J);
  document.getElementById("country_buttons").appendChild(C);


  function update_years()
  {
    sum_waste = 0;
    document.getElementById("waste_count").innerHTML = parseInt(sum_waste);
    if(years != 0){
      var elements = document.getElementsByClassName("buttons");
      for(var x=0; x < elements.length; x++)
        {
        elements[x].style.backgroundColor = "white";
      }
      for(x = 0; x< impacted_keys.length;x++){
        impacted[impacted_keys[x]][0] = impacted_lbs[x]
      }
      map.attr("fill",(d) => get_color(d.id));
    }

  }
  const one = document.createElement("button");
  one.onclick =  function()
  {

    update_years();
    if(years == 1){
    years = 0;
    }
    else{
      years = 1
      one.style.backgroundColor = "#d8b48d";
    }
    console.log(impacted);

  }
  one.className = "buttons";
  one.innerText = "1";

  const two = document.createElement("button");
  two.onclick =  function()
  {update_years();
    if(years == 2){
    years = 0;
    }
    else{
      years = 2
      two.style.backgroundColor = "#d8b48d";
    }
    console.log(impacted);

  }
  two.innerText = "2";
  two.className = "buttons";

  const three = document.createElement("button");
  three.onclick =  function()
  {
    update_years();
    if(years == 3){
    years = 0;
    }
    else{
      years = 3
      three.style.backgroundColor = "#d8b48d";
    }
    console.log(impacted);

  }
  three.innerText = "3";
  three.className = "buttons";

  const four = document.createElement("button");
  four.onclick =  function()
  {update_years();
    if(years == 4){
    years = 0;
    }
    else{
      years = 4;
      four.style.backgroundColor = "#d8b48d";
    }
    console.log(impacted);

  }
  four.innerText = "4";
  four.className = "buttons";

  const five = document.createElement("button");
  five.onclick =  function()
  {update_years();
    if(years == 5){
    years = 0;
    }
    else{
      years = 5;
      five.style.backgroundColor = "#d8b48d";
    }
    console.log(impacted);

  }
  five.innerText = "5";
  five.className = "buttons";

  document.getElementById("year_buttons").appendChild(one);
  document.getElementById("year_buttons").appendChild(two);
  document.getElementById("year_buttons").appendChild(three);
  document.getElementById("year_buttons").appendChild(four);
  document.getElementById("year_buttons").appendChild(five);
    // Draw the map
    // Draw the map

    map = svg.append("g")
        .selectAll("path")
        .data(data.features)
        .enter().append("path")
            .attr("class","country")
            .attr("id", (d) => d.id)
            .attr("fill",(d) => get_color(d.id))
            .attr("d", d3.geoPath()
                .projection(projection)
            )
            .attr("stroke","#f2e6d9")
            .on('mouseover',  mouseEntersState )
            .on('mouseout',  mouseLeavesState );;



    function mouseEntersState()
    {
      i = d3.select(this).datum().id
      // i = item
      console.log("in i")
      console.log(i)
      if(Object.keys(countries_dict).includes(i))
      {
        links = document.getElementsByClassName("links");
        for(idx = 0; idx < links.length; idx++){
          console.log(links[idx]);
          links[idx].style.visibility = "hidden";
        }
        console.log(d3.select(this));
        country_name_text = ""
        country_info_text = ""
        console.log("enter")
        console.log(i)

        if(Object.keys(impacted).includes(i)){
          country_name_text =  countries_dict[i]
          country_info_text =  countries_dict[i]
          document.getElementById("country_tons").innerHTML =parseInt(impacted[i]) + " tons imported/year";

        }
        else if(Object.keys(impactor).includes(i)){
          console.log("impactor")
          country_name_text =  countries_dict[i]
          country_info_text =  countries_dict[i];
          document.getElementById("country_tons").innerHTML = parseInt(impactor[i][0]) + " tons exported/year";
        }
        document.getElementById("country_name").innerHTML =country_name_text;
        document.getElementById("country_info").innerHTML =description_dict[i][0];
        console.log("images/"+description_dict[i][1])

        document.getElementById("info_image").src ="images/"+description_dict[i][1];


        links = document.getElementsByClassName(i + " link");
        console.log(typeof links)
        for(i = 0; i < links.length; i++){
          console.log(links[i]);
          links[i].style.visibility = "visible";
        }
      }
    }
    function mouseEntersStateCircle()
    {
      i = this.id
      // i = item
      console.log("in i")
      console.log(i)
      if(Object.keys(countries_dict).includes(i))
      {
        links = document.getElementsByClassName("links");
        for(idx = 0; idx < links.length; idx++){
          console.log(links[idx]);
          links[idx].style.visibility = "hidden";
        }
        console.log(d3.select(this));
        country_name_text = ""
        country_info_text = ""
        console.log("enter")
        console.log(i)

        if(Object.keys(impacted).includes(i)){
          country_name_text =  countries_dict[i]
          country_info_text =  countries_dict[i]
          document.getElementById("country_tons").innerHTML =parseInt(impacted[i]) + " tons imported/year";

        }
        else if(Object.keys(impactor).includes(i)){
          console.log("impactor")
          country_name_text =  countries_dict[i]
          country_info_text =  countries_dict[i];
          document.getElementById("country_tons").innerHTML = parseInt(impactor[i][0]) + " tons exported/year";
        }
        document.getElementById("country_name").innerHTML =country_name_text;
          document.getElementById("country_info").innerHTML =description_dict[i][0];
          document.getElementById("info_image").src ="images/"+description_dict[i][1];


        links = document.getElementsByClassName(i + " link");
        console.log(typeof links)
        for(i = 0; i < links.length; i++){
          console.log(links[i]);
          links[i].style.visibility = "visible";
        }
      }
    }
// ${coordinates["USA"][0]} ${coordinates["USA"][1]} S 200 200 ${coordinates[impactor["USA"][idx]][0])} ${coordinates[impactor["USA"][idx]][1])}

// "M${p1x} ${p1y} Q${c1x} ${c1y} ${p2x} ${p2y}"

Object.keys(impactor).forEach((item, i) => {
  for(idx = 1; idx < impactor[item].length; idx++){
    console.log(item)
    let lines = svg.append("path")
               .attr("class", "links")
               .attr("class",item + " link")
               .attr("d","M "+ coordinates[item][0] + " " +
               coordinates[item][1] + " S300  300 " + " " + coordinates[impactor[item][idx]][0] + " " + coordinates[impactor[item][idx]][1])
               .attr("stroke-width",2)
               .attr("visibility","hidden")
               .attr("stroke","black")
               .attr("fill","none")
             }
  });

Object.keys(impacted).forEach((item, i) => {
  for(idx = 1; idx < impacted[item].length; idx++){
    console.log(item)
    let lines = svg.append("path")
               .attr("class", "links")
               .attr("class",item + " link")
               .attr("d","M "+ coordinates[item][0] + " " +
               coordinates[item][1] + " S300  300 " + " " + coordinates[impacted[item][idx]][0] + " " + coordinates[impacted[item][idx]][1])
               .attr("stroke-width",2)
               .attr("visibility","hidden")
               .attr("stroke","black")
               .attr("fill","none")
             }
  });
  cName = document.getElementsByClassName('us');
        // for(var index=0;index < className.length;index++){
        // className[index].x1 = "30px";
        // className[index].style.visibility = "hidden";
        // console.log(className[index]);
        // console.log(className[index].visibility);
      // }
      Object.keys(countries_dict).forEach((item, i) => {
      console.log(item)
      let circle = svg.append('circle')
                      .attr("id",item)
                      .attr("class","circle")
                      .attr('cx',coordinates[item][0])
                      .attr('cy', coordinates[item][1])
                      .attr('r','3px')
                      .on('mouseover',  mouseEntersStateCircle )
                      .on('mouseout',  mouseLeavesStateCircle );
                    });
        // var className = document.getElementsByClassName('us');
        // for(var index=0;index < className.length;index++){
        // className[index].x1 = "30px";
        // className[index].style.visibility = "hidden";
        // console.log(className[index]);
        // console.log(className[index].visibility);
      // }
      // // Nodes
      // let circles = layer.selectAll("circle.node").data(nodes)
      //        .join(
      //           enter => enter.append("circle")
      //                         .attr("class","node")
      //                         .attr("stroke", "#333")
      //                         .attr("r", 8)
      //                         .attr("cx", 0)
      //                         .attr("cy", 0)
      //                         .attr("fill", d => {
      //                           if (d.id === 1) { return "#0C0"; }
      //                           else if (d.id === 34) { return "#C00"; }
      //                           else { return "steelblue" }
      //                         })
      //                         // NOTE: Drag events work slightly different in v6 / v7 -- always check docs
      //                         //  and verify which version any reference examples are using
      //                         .call( d3.drag().on("start",dragstart)
      //                                         .on("drag",dragging)
      //                                         .on("end",dragend) )
      //         )
      //        .attr("transform", d => `translate(${d.x},${d.y})`);


       // We are using a transform to move circles around rather than cx and cy
       //  This occasionally does have performance implications -- some browsers/GPUs can "cache" the circles drawn and then just paint the same circle over again if you use transform (technically: store the image in a frame buffer and then blit it somewhere), but might have to redraw the pixels if you change r, cx, cy, etc.
       //  This isn't at all guaranteed, and is still pretty rare. That said, this can be a good practice to get into if you are scaling up
       //    (Though if you really need to scale up, then SVG will quickly stop performing)







    function mouseLeavesState()
    {
      i = d3.select(this).datum().id
      // i = item
      console.log("i")
      console.log(i)
      links = document.getElementsByClassName(i + " link");
      console.log("leave")
      for(idx = 0; idx < links.length; idx++){
        console.log(links[idx]);
        links[idx].style.visibility = "hidden";
      }
      document.getElementById("info_image").src = "";
      document.getElementById("country_info").innerHTML = "Hover over points on map to learn about country's E Waste condition </br></br> Click on buttons above to see how using our phones for longer can make a difference";
      document.getElementById("country_tons").innerHTML ="";
      document.getElementById("country_name").innerHTML = "";


    }

    function mouseLeavesStateCircle()
    {
      i = this.id
      // i = item
      console.log("i")
      console.log(i)
      links = document.getElementsByClassName(i + " link");
      console.log("leave")
      for(idx = 0; idx < links.length; idx++){
        console.log(links[idx]);
        links[idx].style.visibility = "hidden";
      }
      document.getElementById("info_image").src = "";
      document.getElementById("country_info").innerHTML = "Hover over points on map to learn about country's E Waste condition  </br></br> Click on buttons above to see how using our phones for longer can make a difference";
      document.getElementById("country_tons").innerHTML ="";
      document.getElementById("country_name").innerHTML = "";

    }
    //                      .attr("x", 0)
    //                      .attr("y", 2);
    //     let txt2 = blurb.append("text")
    //                      .attr("fill", "white")
    //                      .attr("text-anchor","middle")
    //                      .attr("alignment-baseline","hanging")
    //                      .attr("x", 0)
    //                      .attr("y", 22);
    //
    //
    //  function mouseEntersState() {
    //      tooltip.style("visibility","visible")
    //      let country = d3.select(this);
    //      country.attr("stroke","black")
    //           .attr("stroke-width", 3);
    //
    //      // Using .datum() to recover the data for the state element (because we used a .join() to make it)...
    //      // ... get the name of the state and count
    //      let stateID = state.datum().id;
    //
    //      txt.text(stateIdNames[ stateID ]);
    //      txt2.text(stateIdCounts[  stateID  ]);
    //
    //      // You can use the geoPath() generator to do all sorts of helpful things
    //      // let [xPos, yPos] = path.centroid( state.datum() );  // Get the pixel "center" of the state
    //
    //      let bounds = path.bounds( state.datum() );   // Get the pixel boundaries of the state
    //      // In both cases here, the geoPath() is parsing the fancy topoJSON data to figure out pixels using the projection
    //
    //      // Place it at the bottom of the state, centered
    //      let xPos = (bounds[0][0]+bounds[1][0])/2.0;
    //      let yPos = bounds[1][1] - 15;
    //
    //      // Transform the <g> group so that everything moves together easily
    //      tooltip.attr("transform",`translate(${xPos},${yPos})`);
    //
    //      // To fix the oscillation, we add this in the CSS for .mouseover
    //      //  pointer-events: none;
    //
    //      // At the end of lecture segment, I mentioned adding this code to do the mouseover outline the "proper" way
    //      // Technically, the right way to do this is with another mesh for some complicated reasons
    //      //  You have to use the second parameter of topojson.mesh() to pick out this state's boundaries
    //      // First, make a new mesh with a filter for only borders of the current state
    //      var mo = topojson.mesh(us, us.objects.states, function(a, b) { return a.id === stateID || b.id === stateID; });
    //      //  Then apply it to your special mesh that's on top of everything else (added earlier in this file)
    //      momesh.datum(mo).attr("d", path)
    //
    //
    //
    //
    //    }
    // var circles = map.append("circle")
    //               .classed("circle-class", true)
    //               .attr("class", function (d){ return "node node_" + d.index;})
    //               .attr("r", 10)
    //               .attr("fill", 'red')
    //               .attr("strokeStyle", 'black');


})

document.getElementById("info_image").src = "";
document.getElementById("country_info").innerHTML = "Hover over points on map to learn about country's E Waste condition </br></br> Click on buttons above to see how using our phones for longer can make a difference";
document.getElementById("country_tons").innerHTML ="";
document.getElementById("country_name").innerHTML = "";

links = document.getElementsByClassName("USA link");
console.log(typeof links)
for(i = 0; i < links.length; i++){
  console.log(links[i]);
  links[i].style.visibility = "visible";
}



</script>
<script>



  // Call render once to make sure we draw circles even if simulation stops


</script>

</html>
